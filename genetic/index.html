<html>
<head>
    <title>Genetic</title>
    <link rel="stylesheet" href="../style/common.css"/>
    <script type="text/javascript" src="../script/util.js"></script>
    <script type="text/javascript" src="../script/canvas.js"></script>
    <script type="text/javascript" src="../script/domgen.js"></script>
    <script type="text/javascript" src="script/genetic.js"></script>
</head>
<body>
<script type="text/javascript">

    var target = "Hello world!";
    var chars = ' ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*(),./';

    var n = target.length;
    var population = (2048).times(function( ) {
        var n = target.length - 10 + Math.floor(Math.random()*21);
        return n.times(function() {
            return chars[Math.floor(Math.random() * chars.length)];
        }).join('');
    });

    function fitness( a )
    {
        var i = -1, n = Math.min(target.length, a.length);
        var score = 0;
        while( ++i < n )
        {
            score += Math.abs(target.charCodeAt(i) - a.charCodeAt(i));
        }

        score += Math.abs(target.length - a.length) * 100;
        return score;
    }

    var genetic = new Genetic(population, fitness, 10, 25);
    while( genetic.n < 50)
    {
        genetic.run();
        console.log(genetic.n, genetic.best);
    }


</script>
</body>
</html>
