<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <title></title>
    <script type="text/javascript" src="script/common/util.js"></script>
    <script type="text/javascript" src="script/common/color.js"></script>
    <script type="text/javascript" src="script/logic.js"></script>
</head>
<body>
<script type="text/javascript">
    Comet = {
        open : function(url, args)
        {
            var ifr = document.createElement('iframe');
            ifr.setAttribute('src', url + '?' + toQueryString(args));
            ifr.setAttribute('style', 'display:none');

            console.log(ifr);

            document.body.appendChild(ifr);

            return ifr;
        }
    };

    var mx = 32;
    var my = 24;

    function reportCode(code)
    {
        console.log('Received code: ' + code);
        Comet.open('push.php', {a:'join', k:code});
    }

    function istart(itsMyTurn)
    {
        console.log("It's {party} turn.".fmt({party:itsMyTurn ? 'my' : "their's"}));
    }

    var logic = new FillerLogic(mx, my);

    Comet.open('push.php', {a:'start', f:logic.serialize()});

</script>
</body>
</html>