<!DOCTYPE html>
<html>
<head>
    <title>Shoot</title>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>

    <link rel="stylesheet" href="../style/pixelless.css" type="text/css"/>

    <script type="text/javascript" src="../script/canvas.js"></script>
    <script type="text/javascript" src="script/shooter-view.js"></script>
    <script type="text/javascript" src="script/gun.js"></script>
    <script type="text/javascript" src="script/vehicle.js"></script>
    <script type="text/javascript" src="script/shooter.js"></script>
    <script type="text/javascript" src="script/shooter-controller.js"></script>
</head>
<body>
<div id="container">
    <div class="content header">
        <h1>Shoot</h1>
    </div>

    <div class="content">

        <canvas id="canvas" width="900px" height="600px"></canvas>

        <div class="empty_footer">
        </div>
    </div>
</div>
<div id="footer">
    <div class="content">
        &copy;
        <script type="text/javascript">
            var a = ['and', 'mail'].join('y@g');
            var b = ['<a ', 'href="mai', 'lto:zz',a, '.com?','subject=','JavaScript Filler', '"', '>Vynogradov<', '/a>'];
            document.write(b.join(''));
        </script>
        2009&ndash;2010
    </div>
</div>
<script type="text/javascript">
    // Provide testing ground for different kind of shooting agents

    var canvas = document.getElementById('canvas');
    var ctx = canvas.getContext('2d');
    ctx.strokeStyle = '#eee';
    ctx.fillStyle = '#eee';

    var fps = 24;
    var frameDelay = 1000 / fps;

    var view = new ShooterView(ctx, 900, 600);

    var pos = new Point(0, 0);
    var dir = 0;    // radians - moving north.
    var mass = 2;   // 'size'
    var speed = 60; // units per second
    var hp = 20;

    var damage = 100;    // projecile damage
    var distance = 500;  // projectile flight distance
    var pjSpeed = 200;   // projectile speed

    var rate = 10;       // shot rate shots per second
    var clip = 5;        // clip size
    var reload = 500;    // reload time

    var vehicle = new Vehicle(pos, Math.PI / 4, mass, speed);
    var projectile = new Projectile(damage, pjSpeed);
    var gun = new Gun(projectile, distance, rate, clip, reload);
    var sample = new Shooter(vehicle, hp, 1, gun);

    var numShooters = 5;
    var shooters = [];
    while (shooters.length < numShooters){
        var clone = sample.clone();
        clone.vehicle.dir = rnd(4 * Math.PI);
        shooters.push(clone);
    }
    
    var ctrl = new ShooterController(view, shooters, 900, 600);

    function frame() {
        ctrl.frame();

        window.setTimeout(frame, frameDelay);
    }

    frame();

</script>
</body>
</html>
